{% load i18n %}
<div id="tmp" class="tmp">
    <div id="tournament" class="tournament-bracket">
        <div class="round">
            {% for player in players %}
                {% if forloop.counter0|divisibleby:2 %}
                    <span class="inGame" style="font-family: 'Press Start 2P'; color: #fff;">
                        {% if forloop.counter0 == 0 %}
                            1
                        {% elif forloop.counter0 == 2 %}
                            2
                        {% elif forloop.counter0 == 4 %}
                            3
                        {% elif forloop.counter0 == 6 %}
                            4
                        {% endif %}
                    </span>
                    <div class="match-container match">
                {% endif %}
                    <div class="bracket-player">
                        {{ player.name }} <span class="score">{{ player.score.0 }}</span>
                    </div>
                {% if forloop.counter0|divisibleby:2 != 1 %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        <!-- ROUND II -->
        <div class="round">
            {% for player in players2 %}
                {% if forloop.counter0|divisibleby:2 %}
                    <span class="inGame" style="font-family: 'Press Start 2P'; color: #fff;">
                        {% if forloop.counter0 == 0 %}
                            1
                        {% elif forloop.counter0 == 2 %}
                            2
                        {% elif forloop.counter0 == 4 %}
                            3
                        {% elif forloop.counter0 == 6 %}
                            4
                        {% endif %}
                    </span>
                    <div class="match-container match">
                {% endif %}
                    <div class="bracket-player">
                        {{ player.name }} <span class="score">{{ player.score.1 }}</span>
                    </div>
                {% if forloop.counter0|divisibleby:2 != 1 %}
                    </div>
                {% endif %}
            {% endfor %}
            {% if players2|length == 1 or players2|length == 3 %}
                </div>
            {% endif %}
        </div>
        <!-- ROUND III -->
        <div class="round">
            {% for player in players3 %}
                {% if forloop.counter0|divisibleby:2 %}
                    <span class="inGame" style="font-family: 'Press Start 2P'; color: #fff;">
                        {% if forloop.counter0 == 0 %}
                            1
                        {% elif forloop.counter0 == 2 %}
                            2
                        {% elif forloop.counter0 == 4 %}
                            3
                        {% elif forloop.counter0 == 6 %}
                            4
                        {% endif %}
                    </span>
                    <div class="match-container match">
                {% endif %}
                    <div class="bracket-player">
                        {{ player.name }} <span class="score">{{ player.score.2 }}</span>
                    </div>
                {% if forloop.counter0|divisibleby:2 != 1 %}
                    </div>
                {% endif %}
            {% endfor %}
            {% if players3|length == 1 %}
                </div>
            {% endif %}
        </div>
    </div>
    {% if players|length == 2 and players2|length == 1 %}
        <button class="continu-button" hx-get="{% url 'game:gameChoice' %}" hx-target="#tmp" hx-swap="outerHTML"
            style="cursor: pointer; z-index: 3;">
            {% trans "Continue" %}
        </button>
    {% elif players|length == 4 and players3|length == 1 %}
        <button class="continu-button" hx-get="{% url 'game:gameChoice' %}" hx-target="#tmp" hx-swap="outerHTML"
            style="cursor: pointer; z-index: 3;">
            {% trans "Continue" %}
        </button>
    {% elif players|length == 8 and players4|length == 1 %}
        <button class="continu-button" hx-get="{% url 'game:gameChoice' %}" hx-target="#tmp" hx-swap="outerHTML"
            style="cursor: pointer; z-index: 3;">
            {% trans "Continue" %}
        </button>
    {% elif game == 'breakout' %}
        <button class="continu-button" hx-get="{% url 'game:breakoutCanvas' %}" hx-target="#tmp" hx-swap="outerHTML"
            hx-vals='{"players": "{{ players|escapejs }}", "game": "breakout"}' style="cursor: pointer; z-index: 3;">
            {% trans "Continue" %}
        </button>
    {% elif game == 'pong' %}
        <button class="continu-button" hx-get="{% url 'game:pongCanvas' %}" hx-target="#tmp" hx-swap="outerHTML"
            hx-vals='{"players": "{{ players|escapejs }}", "game": "pong"}' style="cursor: pointer; z-index: 3;">
            {% trans "Continue" %}
        </button>
    {% endif %}
</div>
